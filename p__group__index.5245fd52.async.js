/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkantd_admin"] = self["webpackChunkantd_admin"] || []).push([[370],{

/***/ 13175:
/***/ (function(module) {

eval("// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"table___HpTst\"};\n\n//# sourceURL=webpack://antd-admin/./src/pages/group/components/List.less?");

/***/ }),

/***/ 50001:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": function() { return /* binding */ group; }\n});\n\n// EXTERNAL MODULE: ./node_modules/@umijs/babel-preset-umi/node_modules/@babel/runtime/helpers/esm/objectSpread2.js + 1 modules\nvar objectSpread2 = __webpack_require__(8870);\n// EXTERNAL MODULE: ./node_modules/@lingui/core/build/esm/index.js + 1 modules\nvar esm = __webpack_require__(45610);\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(67294);\n// EXTERNAL MODULE: ./src/.umi-production/core/umiExports.ts + 17 modules\nvar umiExports = __webpack_require__(15854);\n// EXTERNAL MODULE: ./src/components/index.js + 23 modules\nvar components = __webpack_require__(8571);\n// EXTERNAL MODULE: ./node_modules/qs/lib/index.js\nvar lib = __webpack_require__(80129);\n// EXTERNAL MODULE: ./node_modules/@umijs/babel-preset-umi/node_modules/@babel/runtime/helpers/esm/extends.js\nvar esm_extends = __webpack_require__(91896);\n// EXTERNAL MODULE: ./node_modules/@umijs/babel-preset-umi/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js + 1 modules\nvar objectWithoutProperties = __webpack_require__(93224);\n// EXTERNAL MODULE: ./node_modules/@lingui/react/build/esm/index.js\nvar build_esm = __webpack_require__(21693);\n// EXTERNAL MODULE: ./node_modules/antd/es/modal/index.js + 10 modules\nvar modal = __webpack_require__(95207);\n// EXTERNAL MODULE: ./node_modules/antd/es/avatar/index.js + 4 modules\nvar avatar = __webpack_require__(47759);\n// EXTERNAL MODULE: ./node_modules/antd/es/table/index.js + 50 modules\nvar table = __webpack_require__(31123);\n// EXTERNAL MODULE: ./src/pages/group/components/List.less?modules\nvar Listmodules = __webpack_require__(13175);\nvar Listmodules_default = /*#__PURE__*/__webpack_require__.n(Listmodules);\n;// CONCATENATED MODULE: ./src/pages/group/components/List.jsx\n\n\n\nvar _excluded = [\"onDeleteItem\", \"onEditItem\"];\n\n\n\n\n\n\n\nvar List_confirm = modal/* default.confirm */.Z.confirm;\n\nclass List extends react.PureComponent {\n  constructor() {\n    super(...arguments);\n\n    this.handleMenuClick = (record, e) => {\n      var _this$props = this.props,\n          onDeleteItem = _this$props.onDeleteItem,\n          onEditItem = _this$props.onEditItem;\n\n      if (e.key === '1') {\n        onEditItem(record);\n      } else if (e.key === '2') {\n        List_confirm({\n          title:\n          /*i18n*/\n          esm/* i18n._ */.ag._(\"Are you sure delete this record?\"),\n\n          onOk() {\n            onDeleteItem(record.id);\n          }\n\n        });\n      }\n    };\n  }\n\n  render() {\n    var _this$props2 = this.props,\n        onDeleteItem = _this$props2.onDeleteItem,\n        onEditItem = _this$props2.onEditItem,\n        tableProps = (0,objectWithoutProperties/* default */.Z)(_this$props2, _excluded);\n\n    var columns = [{\n      title: /*#__PURE__*/react.createElement(build_esm/* Trans */.cC, {\n        id: \"Avatar\"\n      }),\n      dataIndex: 'thub?.id',\n      key: 'thub?.id',\n      width: '7%',\n      fixed: 'left',\n      render: (text, record) => {\n        var _record$thub;\n\n        return /*#__PURE__*/react.createElement(avatar/* default */.C, {\n          style: {\n            marginLeft: 8\n          },\n          src: \"http://localhost:1337\".concat((_record$thub = record.thub) === null || _record$thub === void 0 ? void 0 : _record$thub.url)\n        });\n      }\n    }, {\n      title: /*#__PURE__*/react.createElement(build_esm/* Trans */.cC, {\n        id: \"T\\xEAn\"\n      }),\n      dataIndex: 'fullname',\n      key: 'fullname',\n      ellipsis: true\n    }, {\n      title: /*#__PURE__*/react.createElement(build_esm/* Trans */.cC, {\n        id: \"Username\"\n      }),\n      dataIndex: 'username',\n      key: 'username'\n    }, {\n      title: /*#__PURE__*/react.createElement(build_esm/* Trans */.cC, {\n        id: \"Nh\\xF3m\"\n      }),\n      dataIndex: 'group',\n      key: 'group',\n      render: (text, record) => {\n        var _record$group;\n\n        return /*#__PURE__*/react.createElement(\"span\", null, (_record$group = record.group) === null || _record$group === void 0 ? void 0 : _record$group.name);\n      }\n    }, {\n      title: /*#__PURE__*/react.createElement(build_esm/* Trans */.cC, {\n        id: \"Phone\"\n      }),\n      dataIndex: 'phone',\n      key: 'phone'\n    }, {\n      title: /*#__PURE__*/react.createElement(build_esm/* Trans */.cC, {\n        id: \"Email\"\n      }),\n      dataIndex: 'email',\n      key: 'email',\n      ellipsis: true\n    }, {\n      title: /*#__PURE__*/react.createElement(build_esm/* Trans */.cC, {\n        id: \"Lo\\u1EA1i\"\n      }),\n      dataIndex: 'type',\n      key: 'type'\n    }, {\n      title: /*#__PURE__*/react.createElement(build_esm/* Trans */.cC, {\n        id: \"CreateTime\"\n      }),\n      dataIndex: 'createdAt',\n      key: 'createdAt'\n    }, {\n      title: /*#__PURE__*/react.createElement(build_esm/* Trans */.cC, {\n        id: \"Operation\"\n      }),\n      key: 'operation',\n      fixed: 'right',\n      width: '8%',\n      render: (text, record) => {\n        return /*#__PURE__*/react.createElement(components/* DropOption */.nl, {\n          onMenuClick: e => this.handleMenuClick(record, e),\n          menuOptions: [{\n            key: '1',\n            name:\n            /*i18n*/\n            esm/* i18n._ */.ag._(\"Update\")\n          }, {\n            key: '2',\n            name:\n            /*i18n*/\n            esm/* i18n._ */.ag._(\"Delete\")\n          }]\n        });\n      }\n    }];\n    return /*#__PURE__*/react.createElement(table/* default */.Z, (0,esm_extends/* default */.Z)({}, tableProps, {\n      pagination: (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, tableProps.pagination), {}, {\n        showTotal: total => \"Total \".concat(total, \" Items\")\n      }),\n      className: (Listmodules_default()).table,\n      bordered: true,\n      scroll: {\n        x: 1200\n      },\n      columns: columns,\n      simple: true,\n      rowKey: record => record.id\n    }));\n  }\n\n}\n\n/* harmony default export */ var components_List = (List);\n// EXTERNAL MODULE: ./node_modules/dayjs/dayjs.min.js\nvar dayjs_min = __webpack_require__(27484);\nvar dayjs_min_default = /*#__PURE__*/__webpack_require__.n(dayjs_min);\n// EXTERNAL MODULE: ./node_modules/antd/es/input/index.js + 9 modules\nvar input = __webpack_require__(94476);\n// EXTERNAL MODULE: ./node_modules/antd/es/date-picker/index.js + 9 modules\nvar date_picker = __webpack_require__(22194);\n// EXTERNAL MODULE: ./node_modules/antd/es/form/index.js + 17 modules\nvar es_form = __webpack_require__(76704);\n// EXTERNAL MODULE: ./node_modules/antd/es/row/index.js\nvar row = __webpack_require__(71230);\n// EXTERNAL MODULE: ./node_modules/antd/es/col/index.js\nvar col = __webpack_require__(15746);\n// EXTERNAL MODULE: ./node_modules/antd/es/button/index.js\nvar es_button = __webpack_require__(71577);\n// EXTERNAL MODULE: ./src/utils/city.js\nvar city = __webpack_require__(46111);\n;// CONCATENATED MODULE: ./src/pages/group/components/Filter.jsx\n\n\n\n\n\n\n\n\n\nvar Search = input/* default.Search */.Z.Search;\nvar RangePicker = date_picker/* default.RangePicker */.Z.RangePicker;\nvar ColProps = {\n  xs: 24,\n  sm: 12,\n  style: {\n    marginBottom: 16\n  }\n};\n\nvar TwoColProps = (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, ColProps), {}, {\n  xl: 96\n});\n\nclass Filter extends react.Component {\n  constructor() {\n    super(...arguments);\n    this.formRef = /*#__PURE__*/react.createRef();\n\n    this.handleFields = fields => {\n      var createTime = fields.createTime;\n\n      if (createTime && createTime.length) {\n        fields.createTime = [dayjs_min_default()(createTime[0]).format('YYYY-MM-DD'), dayjs_min_default()(createTime[1]).format('YYYY-MM-DD')];\n      }\n\n      return fields;\n    };\n\n    this.handleSubmit = () => {\n      var onFilterChange = this.props.onFilterChange;\n      var values = this.formRef.current.getFieldsValue();\n      var fields = this.handleFields(values);\n      onFilterChange(fields);\n    };\n\n    this.handleReset = () => {\n      var fields = this.formRef.current.getFieldsValue();\n\n      for (var item in fields) {\n        if ({}.hasOwnProperty.call(fields, item)) {\n          if (fields[item] instanceof Array) {\n            fields[item] = [];\n          } else {\n            fields[item] = undefined;\n          }\n        }\n      }\n\n      this.formRef.current.setFieldsValue(fields);\n      this.handleSubmit();\n    };\n\n    this.handleChange = (key, values) => {\n      var onFilterChange = this.props.onFilterChange;\n      var fields = this.formRef.current.getFieldsValue();\n      fields[key] = values;\n      fields = this.handleFields(fields);\n      onFilterChange(fields);\n    };\n  }\n\n  render() {\n    var _this$props = this.props,\n        onAdd = _this$props.onAdd,\n        filter = _this$props.filter;\n    var name = filter.name,\n        address = filter.address;\n    var initialCreateTime = [];\n\n    if (filter.createTime && filter.createTime[0]) {\n      initialCreateTime[0] = dayjs_min_default()(filter.createTime[0]);\n    }\n\n    if (filter.createTime && filter.createTime[1]) {\n      initialCreateTime[1] = dayjs_min_default()(filter.createTime[1]);\n    }\n\n    return /*#__PURE__*/react.createElement(es_form/* default */.Z, {\n      ref: this.formRef,\n      name: \"control-ref\",\n      initialValues: {\n        name,\n        address,\n        createTime: initialCreateTime\n      }\n    }, /*#__PURE__*/react.createElement(row/* default */.Z, {\n      gutter: 24\n    }, /*#__PURE__*/react.createElement(col/* default */.Z, (0,esm_extends/* default */.Z)({}, ColProps, {\n      xl: {\n        span: 6\n      },\n      md: {\n        span: 10\n      }\n    }), /*#__PURE__*/react.createElement(es_form/* default.Item */.Z.Item, {\n      name: \"name\"\n    }, /*#__PURE__*/react.createElement(Search, {\n      placeholder:\n      /*i18n*/\n      esm/* i18n._ */.ag._(\"Search Name\"),\n      onSearch: this.handleSubmit\n    }))), /*#__PURE__*/react.createElement(col/* default */.Z, (0,esm_extends/* default */.Z)({}, ColProps, {\n      xl: {\n        span: 8\n      },\n      md: {\n        span: 10\n      },\n      sm: {\n        span: 12\n      },\n      id: \"createTimeRangePicker\"\n    }), /*#__PURE__*/react.createElement(components/* FilterItem */.L2, {\n      label:\n      /*i18n*/\n      esm/* i18n._ */.ag._(\"CreateTime\")\n    }, /*#__PURE__*/react.createElement(es_form/* default.Item */.Z.Item, {\n      name: \"createTime\"\n    }, /*#__PURE__*/react.createElement(RangePicker, {\n      style: {\n        width: '100%'\n      }\n    })))), /*#__PURE__*/react.createElement(col/* default */.Z, (0,esm_extends/* default */.Z)({}, TwoColProps, {\n      xl: {\n        span: 10\n      },\n      md: {\n        span: 24\n      },\n      sm: {\n        span: 24\n      }\n    }), /*#__PURE__*/react.createElement(row/* default */.Z, {\n      type: \"flex\",\n      align: \"middle\",\n      justify: \"space-between\"\n    }, /*#__PURE__*/react.createElement(\"div\", null, /*#__PURE__*/react.createElement(es_button/* default */.ZP, {\n      type: \"primary\",\n      htmlType: \"submit\",\n      className: \"margin-right\",\n      onClick: this.handleSubmit\n    }, /*#__PURE__*/react.createElement(build_esm/* Trans */.cC, {\n      id: \"Search\"\n    })), /*#__PURE__*/react.createElement(es_button/* default */.ZP, {\n      onClick: this.handleReset\n    }, /*#__PURE__*/react.createElement(build_esm/* Trans */.cC, {\n      id: \"Reset\"\n    }))), /*#__PURE__*/react.createElement(es_button/* default */.ZP, {\n      type: \"ghost\",\n      onClick: onAdd\n    }, /*#__PURE__*/react.createElement(build_esm/* Trans */.cC, {\n      id: \"Create\"\n    }))))));\n  }\n\n}\n\n/* harmony default export */ var components_Filter = (Filter);\n;// CONCATENATED MODULE: ./src/pages/group/components/Modal.jsx\n\n\n\nvar Modal_excluded = [\"item\", \"onOk\", \"form\", \"modalType\"];\n\n\n\n\nvar FormItem = es_form/* default.Item */.Z.Item;\nvar formItemLayout = {\n  labelCol: {\n    span: 6\n  },\n  wrapperCol: {\n    span: 24\n  }\n};\n\nclass UserModal extends react.PureComponent {\n  constructor() {\n    super(...arguments);\n    this.formRef = /*#__PURE__*/react.createRef();\n\n    this.handleOk = () => {\n      var _this$props = this.props,\n          _this$props$item = _this$props.item,\n          item = _this$props$item === void 0 ? {} : _this$props$item,\n          onOk = _this$props.onOk;\n      this.formRef.current.validateFields().then(values => {\n        var data = (0,objectSpread2/* default */.Z)({}, values);\n\n        onOk(data);\n      }).catch(errorInfo => {\n        console.log(errorInfo);\n      });\n    };\n  }\n\n  render() {\n    var _this$props2 = this.props,\n        _this$props2$item = _this$props2.item,\n        item = _this$props2$item === void 0 ? {} : _this$props2$item,\n        onOk = _this$props2.onOk,\n        form = _this$props2.form,\n        modalType = _this$props2.modalType,\n        modalProps = (0,objectWithoutProperties/* default */.Z)(_this$props2, Modal_excluded);\n\n    var initialItem = (0,objectSpread2/* default */.Z)({}, item);\n\n    return /*#__PURE__*/react.createElement(modal/* default */.Z, (0,esm_extends/* default */.Z)({}, modalProps, {\n      onOk: this.handleOk\n    }), /*#__PURE__*/react.createElement(es_form/* default */.Z, {\n      ref: this.formRef,\n      name: \"control-ref\",\n      initialValues: initialItem,\n      layout: \"vertical\"\n    }, /*#__PURE__*/react.createElement(FormItem, (0,esm_extends/* default */.Z)({\n      name: \"fullname\",\n      rules: [{\n        required: true\n      }],\n      label:\n      /*i18n*/\n      esm/* i18n._ */.ag._(\"T\\xEAn\"),\n      hasFeedback: true\n    }, formItemLayout), /*#__PURE__*/react.createElement(input/* default */.Z, null)), /*#__PURE__*/react.createElement(FormItem, (0,esm_extends/* default */.Z)({\n      name: \"username\",\n      rules: [{\n        required: true\n      }],\n      label:\n      /*i18n*/\n      esm/* i18n._ */.ag._(\"UserName\"),\n      hasFeedback: true\n    }, formItemLayout), /*#__PURE__*/react.createElement(input/* default */.Z, null)), /*#__PURE__*/react.createElement(FormItem, (0,esm_extends/* default */.Z)({\n      name: \"email\",\n      rules: [{\n        required: true,\n        pattern: /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/,\n        message:\n        /*i18n*/\n        esm/* i18n._ */.ag._(\"The input is not valid E-mail!\")\n      }],\n      label:\n      /*i18n*/\n      esm/* i18n._ */.ag._(\"Email\"),\n      hasFeedback: true\n    }, formItemLayout), /*#__PURE__*/react.createElement(input/* default */.Z, null)), modalType === 'create' ? /*#__PURE__*/react.createElement(FormItem, (0,esm_extends/* default */.Z)({\n      name: \"password\",\n      rules: [{\n        required: true\n      }],\n      label:\n      /*i18n*/\n      esm/* i18n._ */.ag._(\"Password\"),\n      hasFeedback: true\n    }, formItemLayout), /*#__PURE__*/react.createElement(input/* default */.Z, {\n      type: \"password\"\n    })) : /*#__PURE__*/react.createElement(FormItem, (0,esm_extends/* default */.Z)({\n      name: \"password\",\n      rules: [],\n      label:\n      /*i18n*/\n      esm/* i18n._ */.ag._(\"Password\"),\n      hasFeedback: true\n    }, formItemLayout), /*#__PURE__*/react.createElement(input/* default */.Z, {\n      type: \"password\"\n    })), /*#__PURE__*/react.createElement(FormItem, (0,esm_extends/* default */.Z)({\n      name: \"phone\",\n      rules: [],\n      label:\n      /*i18n*/\n      esm/* i18n._ */.ag._(\"Phone\"),\n      hasFeedback: true\n    }, formItemLayout), /*#__PURE__*/react.createElement(input/* default */.Z, null))));\n  }\n\n}\n\n/* harmony default export */ var Modal = (UserModal);\n;// CONCATENATED MODULE: ./src/pages/group/index.js\n\n\nvar _dec, _class;\n\n\n\n\n\n\n\n\n\n\n\nvar Group = (_dec = (0,umiExports/* connect */.$j)(_ref => {\n  var group = _ref.group,\n      loading = _ref.loading;\n  return {\n    group,\n    loading\n  };\n}), _dec(_class = class Group extends react.PureComponent {\n  constructor() {\n    super(...arguments);\n\n    this.handleRefresh = newQuery => {\n      var _this$props = this.props,\n          dispatch = _this$props.dispatch,\n          location = _this$props.location;\n      var query = location.query,\n          pathname = location.pathname;\n      var filters = {};\n\n      if (newQuery.name) {\n        filters['$or'] = [{\n          username: {\n            $containsi: newQuery.name\n          }\n        }, {\n          fullname: {\n            $containsi: newQuery.name\n          }\n        }];\n      }\n\n      if (newQuery.createTime && newQuery.createTime.length > 1) {\n        filters['$and'] = [{\n          createdAt: {\n            $gte: newQuery.createTime[0]\n          }\n        }, {\n          createdAt: {\n            $lte: newQuery.createTime[1]\n          }\n        }];\n      }\n\n      var _query = (0,lib.stringify)({\n        filters\n      }, {\n        encodeValuesOnly: true\n      });\n\n      umiExports/* history.push */.m8.push({\n        pathname,\n        search: _query\n      });\n    };\n\n    this.handleDeleteItems = () => {\n      var _this$props2 = this.props,\n          dispatch = _this$props2.dispatch,\n          group = _this$props2.group;\n      var list = group.list,\n          pagination = group.pagination,\n          selectedRowKeys = group.selectedRowKeys;\n      dispatch({\n        type: 'group/multiDelete',\n        payload: {\n          ids: selectedRowKeys\n        }\n      }).then(() => {\n        this.handleRefresh({\n          page: list.length === selectedRowKeys.length && pagination.current > 1 ? pagination.current - 1 : pagination.current\n        });\n      });\n    };\n  }\n\n  get modalProps() {\n    var _this$props3 = this.props,\n        dispatch = _this$props3.dispatch,\n        group = _this$props3.group,\n        loading = _this$props3.loading;\n    var currentItem = group.currentItem,\n        modalOpen = group.modalOpen,\n        modalType = group.modalType;\n    return {\n      item: modalType === 'create' ? {} : currentItem,\n      open: modalOpen,\n      destroyOnClose: true,\n      maskClosable: false,\n      modalType,\n      confirmLoading: loading.effects[\"group/\".concat(modalType)],\n      title: \"\".concat(modalType === 'create' ?\n      /*i18n*/\n      esm/* i18n._ */.ag._(\"Create User\") :\n      /*i18n*/\n      esm/* i18n._ */.ag._(\"Update User\")),\n      centered: true,\n      onOk: data => {\n        dispatch({\n          type: \"group/\".concat(modalType),\n          payload: data\n        }).then(() => {\n          this.handleRefresh({});\n        });\n      },\n\n      onCancel() {\n        dispatch({\n          type: 'group/hideModal'\n        });\n      }\n\n    };\n  }\n\n  get listProps() {\n    var _this$props4 = this.props,\n        dispatch = _this$props4.dispatch,\n        group = _this$props4.group,\n        loading = _this$props4.loading;\n    var list = group.list,\n        pagination = group.pagination;\n    return {\n      dataSource: list,\n      loading: loading.effects['group/query'],\n      pagination,\n      onChange: page => {\n        this.handleRefresh({\n          page: page.current,\n          pageSize: page.pageSize\n        });\n      },\n      onDeleteItem: id => {\n        dispatch({\n          type: 'group/delete',\n          payload: id\n        }).then(() => {\n          this.handleRefresh({\n            page: list.length === 1 && pagination.current > 1 ? pagination.current - 1 : pagination.current\n          });\n        });\n      },\n\n      onEditItem(item) {\n        dispatch({\n          type: 'group/showModal',\n          payload: {\n            modalType: 'update',\n            currentItem: item\n          }\n        });\n      }\n\n    };\n  }\n\n  get filterProps() {\n    var _this$props5 = this.props,\n        location = _this$props5.location,\n        dispatch = _this$props5.dispatch,\n        group = _this$props5.group;\n    var query = location.query;\n    return {\n      filter: (0,objectSpread2/* default */.Z)({}, query),\n      onFilterChange: value => {\n        this.handleRefresh((0,objectSpread2/* default */.Z)({}, value));\n      },\n\n      onAdd() {\n        dispatch({\n          type: 'group/showModal',\n          payload: {\n            modalType: 'create'\n          }\n        });\n      }\n\n    };\n  }\n\n  render() {\n    var _this$props6 = this.props,\n        dispatch = _this$props6.dispatch,\n        group = _this$props6.group;\n    return /*#__PURE__*/react.createElement(components/* Page */.T3, {\n      inner: true\n    }, /*#__PURE__*/react.createElement(components_Filter, this.filterProps), /*#__PURE__*/react.createElement(components_List, this.listProps), /*#__PURE__*/react.createElement(Modal, this.modalProps));\n  }\n\n}) || _class);\n/* harmony default export */ var group = (Group);\n\n//# sourceURL=webpack://antd-admin/./src/pages/group/index.js_+_3_modules?");

/***/ })

}]);